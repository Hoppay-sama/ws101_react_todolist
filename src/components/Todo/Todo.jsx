import React, {useState, useEffect} from 'react';

function Todo() {
    const [isCompleteScreen, setIsCompleteScreen] = useState(false);
    const [allTodos, setTodos] = useState([]);
    const [CompletedTodos, setCompletedTodos] = useState([]);
    const [newTitle, setNewTitle] = useState("");
    const [newDescription, setNewDescription] = useState("");
    
    

    const handleAddTodo = ()=>{
        let NewTodoItem = {
            title:newTitle,
            description:newDescription
        }

        let updatedTodoArr = [...allTodos];
        updatedTodoArr.push(NewTodoItem);
        setTodos(updatedTodoArr);
        localStorage.setItem('todolist', JSON.stringify(updatedTodoArr))
    }

    const handleDeleteTodo = (index)=>{
        let removeTodo = [...allTodos];
        removeTodo.splice(index,1);

        localStorage.setItem('todolist', JSON.stringify(removeTodo));
        setTodos(removeTodo);

    }

    const handleCompleteTodo = (index) =>{
        let now = new Date();
        let dd = now.getDate();
        let mm = now.getMonth() + 1;
        let yyyy = now.getFullYear();
        let h = now.getHours();
        let m = now.getMinutes();
        let s = now.getSeconds();

        let CompletedDate = dd + '/' + mm + '/' + yyyy + ' at ' + h + ':' + m + ':' + s;
        let FilteredItem = {
            ...allTodos[index],
            CompletedDate:CompletedDate
        }

        let updatedCompletedArr = [...CompletedTodos];
        updatedCompletedArr.push(FilteredItem);
        setCompletedTodos(updatedCompletedArr);
        handleDeleteTodo(index);
        localStorage.setItem('CompletedTodos', JSON.stringify(updatedCompletedArr));
    }

    const handleDeleteCompletedTodo = (index) =>{
        let removeCompletedTodo = [...CompletedTodos];
        removeCompletedTodo.splice(index,1);

        localStorage.setItem('CompletedTodos', JSON.stringify(removeCompletedTodo));
        setCompletedTodos(removeCompletedTodo);
    }


    useEffect(()=>{
        let savedData = JSON.parse(localStorage.getItem('todolist'));
        let savedCompleted = JSON.parse(localStorage.getItem('CompletedTodos'));
        if (savedData){
            setTodos(savedData);
        }
        if (savedCompleted){
            setCompletedTodos(savedCompleted);
        }

    },[])

    return (
        <section className="container">
            <h1 id="Titles">Impasta Task</h1>
            <div className="container_inner">
                <form>
                    <div className="Todo_Title">
                        <label>Title</label>
                        <input type="text" value={newTitle} onChange={(e)=>setNewTitle(e.target.value)} placeholder="Ex. Fake Crew Task"></input>
                    </div>
                    <div className="Todo_Description">
                        <label>Description</label>
                        <input type="text" value={newDescription} onChange={(e)=>setNewDescription(e.target.value)} placeholder="Ex. Fix the Generator"></input>
                    </div>
                    <button onClick={handleAddTodo}>
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 36 36"
                            width="37px"
                            height="37px"
                        >
                            <rect width="36" height="36" x="0" y="0" fill="#fdd835"></rect>
                            <path
                            fill="#e53935"
                            d="M38.67,42H11.52C11.27,40.62,11,38.57,11,36c0-5,0-11,0-11s1.44-7.39,3.22-9.59 c1.67-2.06,2.76-3.48,6.78-4.41c3-0.7,7.13-0.23,9,1c2.15,1.42,3.37,6.67,3.81,11.29c1.49-0.3,5.21,0.2,5.5,1.28 C40.89,30.29,39.48,38.31,38.67,42z"
                            ></path>
                            <path
                            fill="#b71c1c"
                            d="M39.02,42H11.99c-0.22-2.67-0.48-7.05-0.49-12.72c0.83,4.18,1.63,9.59,6.98,9.79 c3.48,0.12,8.27,0.55,9.83-2.45c1.57-3,3.72-8.95,3.51-15.62c-0.19-5.84-1.75-8.2-2.13-8.7c0.59,0.66,3.74,4.49,4.01,11.7 c0.03,0.83,0.06,1.72,0.08,2.66c4.21-0.15,5.93,1.5,6.07,2.35C40.68,33.85,39.8,38.9,39.02,42z"
                            ></path>
                            <path
                            fill="#212121"
                            d="M35,27.17c0,3.67-0.28,11.2-0.42,14.83h-2C32.72,38.42,33,30.83,33,27.17 c0-5.54-1.46-12.65-3.55-14.02c-1.65-1.08-5.49-1.48-8.23-0.85c-3.62,0.83-4.57,1.99-6.14,3.92L15,16.32 c-1.31,1.6-2.59,6.92-3,8.96v10.8c0,2.58,0.28,4.61,0.54,5.92H10.5c-0.25-1.41-0.5-3.42-0.5-5.92l0.02-11.09 c0.15-0.77,1.55-7.63,3.43-9.94l0.08-0.09c1.65-2.03,2.96-3.63,7.25-4.61c3.28-0.76,7.67-0.25,9.77,1.13 C33.79,13.6,35,22.23,35,27.17z"
                            ></path>
                            <path
                            fill="#01579b"
                            d="M17.165,17.283c5.217-0.055,9.391,0.283,9,6.011c-0.391,5.728-8.478,5.533-9.391,5.337 c-0.913-0.196-7.826-0.043-7.696-5.337C9.209,18,13.645,17.32,17.165,17.283z"
                            ></path>
                            <path
                            fill="#212121"
                            d="M40.739,37.38c-0.28,1.99-0.69,3.53-1.22,4.62h-2.43c0.25-0.19,1.13-1.11,1.67-4.9 c0.57-4-0.23-11.79-0.93-12.78c-0.4-0.4-2.63-0.8-4.37-0.89l0.1-1.99c1.04,0.05,4.53,0.31,5.71,1.49 C40.689,24.36,41.289,33.53,40.739,37.38z"
                            ></path>
                            <path
                            fill="#81d4fa"
                            d="M10.154,20.201c0.261,2.059-0.196,3.351,2.543,3.546s8.076,1.022,9.402-0.554 c1.326-1.576,1.75-4.365-0.891-5.267C19.336,17.287,12.959,16.251,10.154,20.201z"
                            ></path>
                            <path
                            fill="#212121"
                            d="M17.615,29.677c-0.502,0-0.873-0.03-1.052-0.069c-0.086-0.019-0.236-0.035-0.434-0.06 c-5.344-0.679-8.053-2.784-8.052-6.255c0.001-2.698,1.17-7.238,8.986-7.32l0.181-0.002c3.444-0.038,6.414-0.068,8.272,1.818 c1.173,1.191,1.712,3,1.647,5.53c-0.044,1.688-0.785,3.147-2.144,4.217C22.785,29.296,19.388,29.677,17.615,29.677z M17.086,17.973 c-7.006,0.074-7.008,4.023-7.008,5.321c-0.001,3.109,3.598,3.926,6.305,4.27c0.273,0.035,0.48,0.063,0.601,0.089 c0.563,0.101,4.68,0.035,6.855-1.732c0.865-0.702,1.299-1.57,1.326-2.653c0.051-1.958-0.301-3.291-1.073-4.075 c-1.262-1.281-3.834-1.255-6.825-1.222L17.086,17.973z"
                            ></path>
                            <path
                            fill="#e1f5fe"
                            d="M15.078,19.043c1.957-0.326,5.122-0.529,4.435,1.304c-0.489,1.304-7.185,2.185-7.185,0.652 C12.328,19.467,15.078,19.043,15.078,19.043z"
                            ></path>
                        </svg>
                        <span class="now">Task!</span>
                        <span class="play">Add</span>
                    </button>
                </form>
                <div className="task_container">
                    <button
                        className={`switch_button ${isCompleteScreen === false && 'active'}`}
                        onClick={() => setIsCompleteScreen (false)}>
                        Incomplete
                    </button>
                    <button
                        className={`switch_button ${isCompleteScreen === true && 'active'}`}
                        onClick={() => setIsCompleteScreen (true)}>
                        Complete
                    </button>
                </div>
                <div className="task_list">
                    {isCompleteScreen===false && allTodos.map((item,index)=>{
                        return (
                            <div className="list_items" key={index}>
                                <div className='items_texts'>
                                    <h1>{item.title}</h1>
                                    <p>{item.description}</p>
                                </div>
                                <div className='items_buttons'>
                                    <span className='delete_button' onClick={()=>handleDeleteTodo(index)} title='Delete Task'>
                                        <svg className="before" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="Die">
                                            <path d="M25 13h-5v-2.308c1.19-.557 1.997-1.78 1.997-3.191 0-1.939-1.523-3.515-3.396-3.515-.56 0-1.108.146-1.598.42a3.265 3.265 0 0 0-1.598-.42c-1.873 0-3.396 1.577-3.396 3.515 0 1.407.803 2.63 1.99 3.188V13H6a1 1 0 0 0-1 1v7.173A2.83 2.83 0 0 0 7.827 24H9v2.173A2.83 2.83 0 0 0 11.827 29h2.346A2.83 2.83 0 0 0 17 26.173v-2.049c.305-.017.64-.062 1-.146v2.195A2.83 2.83 0 0 0 20.827 29h2.346A2.83 2.83 0 0 0 26 26.173V14a1 1 0 0 0-1-1zM9 22H7.827A.828.828 0 0 1 7 21.173V15h2v7zm6.98-12.02a.986.986 0 0 0-.804-.984c-.676-.121-1.167-.75-1.167-1.495 0-.835.626-1.515 1.396-1.515.421 0 .728.206.911.38a1 1 0 0 0 1.373 0c.184-.173.49-.38.912-.38.77 0 1.396.68 1.396 1.515 0 .735-.503 1.378-1.17 1.496a.986.986 0 0 0-.807.984H18V13h-2V9.98h-.02zM14 15h3v1h-1a1 1 0 0 0-1 1v1.5a.5.5 0 0 1-1 0V15zm10 10v1.173a.828.828 0 0 1-.827.827h-2.346a.828.828 0 0 1-.827-.827v-2.998a9.5 9.5 0 0 0 .555-.343 1 1 0 1 0-1.11-1.664c-2.135 1.424-3.494.88-3.582.843a1 1 0 0 0-.877 1.797l.049.021c-.01.058-.035.11-.035.171v2.173a.828.828 0 0 1-.827.827h-2.346a.828.828 0 0 1-.827-.827V15h1v3.5c0 1.378 1.121 2.5 2.5 2.5s2.5-1.122 2.5-2.5V18c1.103 0 2-.897 2-2v-1h5v10z" fill="#f50505" class="color000000 svgShape"></path>
                                        </svg>
                                        <svg className="after"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="Killed">
                                            <path d="M25.732 10.4c-.913-.88-2.051-1.204-2.839-1.326-.223-1.186-.92-3.234-3.1-4.369-2.006-1.043-7.45-1.026-12.049 1.734-3.129 1.877-2.781 5.234-1.976 7.273C4.052 15.123 3 16.972 3 19c0 4.411 4.935 8 11 8 5.839 0 10.616-3.328 10.966-7.511 1.078-.957 2.179-2.454 2.179-5.379 0-1.557-.476-2.805-1.413-3.71zM8.773 8.154c4.002-2.4 8.77-2.364 10.097-1.674 1.55.807 1.973 2.364 2.087 3.113l-2.296 2.071c-.025.023-.036.055-.059.08A14.432 14.432 0 0 0 14 11c-2.44 0-4.688.588-6.514 1.568-.387-1.201-.666-3.242 1.287-4.414zm5.08 15.915a1.13 1.13 0 0 1-1.37-.703 1.001 1.001 0 0 0-1.607-.4 1.113 1.113 0 0 1-1.635-.139 1.139 1.139 0 0 1-.205-.993c.116-.483.619-.834 1.195-.834h.324c.71 0 1.428-.503 2.402-1.682a.707.707 0 0 1 .94-.146l.132.087c.248.165.363.47.291.757l-.404.82a1 1 0 0 0 .297 1.24c.276.208.439.52.452.86-.02.544-.355 1.015-.813 1.133zm1.284-6.475-.13-.087a2.706 2.706 0 0 0-3.591.536c-.562.68-.862.896-.963.957h-.222a3.33 3.33 0 0 0-1.005.16C9.09 18.942 9 18.72 9 18.5c0-1.183 2.053-2.5 5-2.5s5 1.317 5 2.5c0 .857-1.09 1.773-2.805 2.218l.008-.019a2.71 2.71 0 0 0-1.066-3.105zm.897 7.246a3.304 3.304 0 0 0 .632-1.859v-.093a.947.947 0 0 0-.008-.124c-.002-.033-.01-.064-.014-.097C19.218 22.01 21 20.417 21 18.5c0-2.523-3.075-4.5-7-4.5s-7 1.977-7 4.5c0 .652.223 1.26.596 1.814a2.91 2.91 0 0 0-.505 1.053c-.119.495-.115.996-.005 1.471v-.003C5.784 21.795 5 20.457 5 19c0-1.595.945-3.043 2.473-4.12h.002c.002 0 .003-.003.004-.004C9.12 13.724 11.434 13 14 13c4.962 0 9 2.691 9 6 0 2.842-2.982 5.223-6.966 5.84zm8.547-8.002c-.662-1.709-2.083-3.184-3.985-4.225l1.77-1.595c.475.047 1.359.218 1.987.831.525.513.792 1.274.792 2.261 0 1.241-.229 2.096-.564 2.728zM29 26.5c0 .828-.895 1.5-2 1.5s-2-.672-2-1.5.895-1.5 2-1.5 2 .672 2 1.5zM24 28c0 .552-.672 1-1.5 1s-1.5-.448-1.5-1 .672-1 1.5-1 1.5.448 1.5 1z" fill="#f50505" class="color000000 svgShape"></path>
                                        </svg>
                                    </span>
                                    <span className="checkbox" onClick={()=>handleCompleteTodo(index)} title='Toggle Task'>
                                        <svg className="before" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="Crewmate">
                                            <path d="M27 11a4.982 4.982 0 0 0-1.489-3.552C24.488 4.848 21.96 3 19 3h-4c-3.86 0-7 3.14-7 7H7c-1.654 0-3 1.346-3 3v8c0 1.654 1.346 3 3 3h1v2c0 1.654 1.346 3 3 3h2c1.654 0 3-1.346 3-3v-1.77c.12.01.247.014.38.014.466 0 1.013-.064 1.62-.225V26c0 1.654 1.346 3 3 3h2c1.654 0 3-1.346 3-3V13.97c.62-.834 1-1.854 1-2.97zm-2 0c0 1.654-1.346 3-3 3h-4c-1.654 0-3-1.346-3-3s1.346-3 3-3h4c1.654 0 3 1.346 3 3zM7 22c-.551 0-1-.449-1-1v-8c0-.551.449-1 1-1h1v10H7zm17 4c0 .551-.449 1-1 1h-2c-.551 0-1-.449-1-1v-2.825c.182-.106.366-.217.555-.343a1 1 0 0 0-1.11-1.664c-2.395 1.598-3.92.973-4.013.93-.007-.003-.015-.002-.022-.005-.056-.026-.12-.032-.18-.047-.07-.016-.138-.04-.208-.042-.008 0-.014-.004-.022-.004-.044 0-.082.02-.125.025-.08.01-.158.019-.233.047-.054.021-.099.056-.148.086-.06.035-.12.067-.172.115-.05.046-.083.103-.123.159-.03.042-.07.073-.093.12-.005.01-.004.021-.009.031-.027.06-.035.125-.051.19-.016.066-.038.13-.04.197 0 .01-.006.02-.006.03v3c0 .551-.449 1-1 1h-2c-.551 0-1-.449-1-1V10c0-2.757 2.243-5 5-5h4c1.12 0 2.149.376 2.982 1H18c-2.757 0-5 2.243-5 5s2.243 5 5 5h4c.712 0 1.386-.154 2-.424V26zm-2-16a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm-4-1h2a1 1 0 0 1 0 2h-2a1 1 0 0 1 0-2z" fill="#000000" class="color000000 svgShape"></path>
                                        </svg>
                                        <svg className="after" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="Crewmate">
                                            <path d="M27 11a4.982 4.982 0 0 0-1.489-3.552C24.488 4.848 21.96 3 19 3h-4c-3.86 0-7 3.14-7 7H7c-1.654 0-3 1.346-3 3v8c0 1.654 1.346 3 3 3h1v2c0 1.654 1.346 3 3 3h2c1.654 0 3-1.346 3-3v-1.77c.12.01.247.014.38.014.466 0 1.013-.064 1.62-.225V26c0 1.654 1.346 3 3 3h2c1.654 0 3-1.346 3-3V13.97c.62-.834 1-1.854 1-2.97zm-2 0c0 1.654-1.346 3-3 3h-4c-1.654 0-3-1.346-3-3s1.346-3 3-3h4c1.654 0 3 1.346 3 3zM7 22c-.551 0-1-.449-1-1v-8c0-.551.449-1 1-1h1v10H7zm17 4c0 .551-.449 1-1 1h-2c-.551 0-1-.449-1-1v-2.825c.182-.106.366-.217.555-.343a1 1 0 0 0-1.11-1.664c-2.395 1.598-3.92.973-4.013.93-.007-.003-.015-.002-.022-.005-.056-.026-.12-.032-.18-.047-.07-.016-.138-.04-.208-.042-.008 0-.014-.004-.022-.004-.044 0-.082.02-.125.025-.08.01-.158.019-.233.047-.054.021-.099.056-.148.086-.06.035-.12.067-.172.115-.05.046-.083.103-.123.159-.03.042-.07.073-.093.12-.005.01-.004.021-.009.031-.027.06-.035.125-.051.19-.016.066-.038.13-.04.197 0 .01-.006.02-.006.03v3c0 .551-.449 1-1 1h-2c-.551 0-1-.449-1-1V10c0-2.757 2.243-5 5-5h4c1.12 0 2.149.376 2.982 1H18c-2.757 0-5 2.243-5 5s2.243 5 5 5h4c.712 0 1.386-.154 2-.424V26zm-2-16a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm-4-1h2a1 1 0 0 1 0 2h-2a1 1 0 0 1 0-2z" fill="#03ff08" class="color000000 svgShape"></path>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                        )
                    })}
                    {isCompleteScreen===true && CompletedTodos.map((item,index)=>{
                        return (
                            <div className="list_items" key={index}>
                                <div className='items_texts'>
                                    <h1>{item.title}</h1>
                                    <p>{item.description}</p>
                                    <p><small>Completed on: {item.CompletedDate}</small></p>
                                </div>
                                <div className='items_buttons'>
                                    <span className='delete_button' onClick={()=>handleDeleteCompletedTodo(index)} title='Delete Task'>
                                        <svg className="before" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="Die">
                                            <path d="M25 13h-5v-2.308c1.19-.557 1.997-1.78 1.997-3.191 0-1.939-1.523-3.515-3.396-3.515-.56 0-1.108.146-1.598.42a3.265 3.265 0 0 0-1.598-.42c-1.873 0-3.396 1.577-3.396 3.515 0 1.407.803 2.63 1.99 3.188V13H6a1 1 0 0 0-1 1v7.173A2.83 2.83 0 0 0 7.827 24H9v2.173A2.83 2.83 0 0 0 11.827 29h2.346A2.83 2.83 0 0 0 17 26.173v-2.049c.305-.017.64-.062 1-.146v2.195A2.83 2.83 0 0 0 20.827 29h2.346A2.83 2.83 0 0 0 26 26.173V14a1 1 0 0 0-1-1zM9 22H7.827A.828.828 0 0 1 7 21.173V15h2v7zm6.98-12.02a.986.986 0 0 0-.804-.984c-.676-.121-1.167-.75-1.167-1.495 0-.835.626-1.515 1.396-1.515.421 0 .728.206.911.38a1 1 0 0 0 1.373 0c.184-.173.49-.38.912-.38.77 0 1.396.68 1.396 1.515 0 .735-.503 1.378-1.17 1.496a.986.986 0 0 0-.807.984H18V13h-2V9.98h-.02zM14 15h3v1h-1a1 1 0 0 0-1 1v1.5a.5.5 0 0 1-1 0V15zm10 10v1.173a.828.828 0 0 1-.827.827h-2.346a.828.828 0 0 1-.827-.827v-2.998a9.5 9.5 0 0 0 .555-.343 1 1 0 1 0-1.11-1.664c-2.135 1.424-3.494.88-3.582.843a1 1 0 0 0-.877 1.797l.049.021c-.01.058-.035.11-.035.171v2.173a.828.828 0 0 1-.827.827h-2.346a.828.828 0 0 1-.827-.827V15h1v3.5c0 1.378 1.121 2.5 2.5 2.5s2.5-1.122 2.5-2.5V18c1.103 0 2-.897 2-2v-1h5v10z" fill="#f50505" class="color000000 svgShape"></path>
                                        </svg>
                                        <svg className="after"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="Killed">
                                            <path d="M25.732 10.4c-.913-.88-2.051-1.204-2.839-1.326-.223-1.186-.92-3.234-3.1-4.369-2.006-1.043-7.45-1.026-12.049 1.734-3.129 1.877-2.781 5.234-1.976 7.273C4.052 15.123 3 16.972 3 19c0 4.411 4.935 8 11 8 5.839 0 10.616-3.328 10.966-7.511 1.078-.957 2.179-2.454 2.179-5.379 0-1.557-.476-2.805-1.413-3.71zM8.773 8.154c4.002-2.4 8.77-2.364 10.097-1.674 1.55.807 1.973 2.364 2.087 3.113l-2.296 2.071c-.025.023-.036.055-.059.08A14.432 14.432 0 0 0 14 11c-2.44 0-4.688.588-6.514 1.568-.387-1.201-.666-3.242 1.287-4.414zm5.08 15.915a1.13 1.13 0 0 1-1.37-.703 1.001 1.001 0 0 0-1.607-.4 1.113 1.113 0 0 1-1.635-.139 1.139 1.139 0 0 1-.205-.993c.116-.483.619-.834 1.195-.834h.324c.71 0 1.428-.503 2.402-1.682a.707.707 0 0 1 .94-.146l.132.087c.248.165.363.47.291.757l-.404.82a1 1 0 0 0 .297 1.24c.276.208.439.52.452.86-.02.544-.355 1.015-.813 1.133zm1.284-6.475-.13-.087a2.706 2.706 0 0 0-3.591.536c-.562.68-.862.896-.963.957h-.222a3.33 3.33 0 0 0-1.005.16C9.09 18.942 9 18.72 9 18.5c0-1.183 2.053-2.5 5-2.5s5 1.317 5 2.5c0 .857-1.09 1.773-2.805 2.218l.008-.019a2.71 2.71 0 0 0-1.066-3.105zm.897 7.246a3.304 3.304 0 0 0 .632-1.859v-.093a.947.947 0 0 0-.008-.124c-.002-.033-.01-.064-.014-.097C19.218 22.01 21 20.417 21 18.5c0-2.523-3.075-4.5-7-4.5s-7 1.977-7 4.5c0 .652.223 1.26.596 1.814a2.91 2.91 0 0 0-.505 1.053c-.119.495-.115.996-.005 1.471v-.003C5.784 21.795 5 20.457 5 19c0-1.595.945-3.043 2.473-4.12h.002c.002 0 .003-.003.004-.004C9.12 13.724 11.434 13 14 13c4.962 0 9 2.691 9 6 0 2.842-2.982 5.223-6.966 5.84zm8.547-8.002c-.662-1.709-2.083-3.184-3.985-4.225l1.77-1.595c.475.047 1.359.218 1.987.831.525.513.792 1.274.792 2.261 0 1.241-.229 2.096-.564 2.728zM29 26.5c0 .828-.895 1.5-2 1.5s-2-.672-2-1.5.895-1.5 2-1.5 2 .672 2 1.5zM24 28c0 .552-.672 1-1.5 1s-1.5-.448-1.5-1 .672-1 1.5-1 1.5.448 1.5 1z" fill="#f50505" class="color000000 svgShape"></path>
                                        </svg>
                                    </span>
                                </div>
                            </div>
                        )
                    })}
                </div>
            </div>
        </section>
    );
}
export default Todo